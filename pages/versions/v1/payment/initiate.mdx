# Payment Initialization

Sensitive credit card data is collected using tokenex iFrames, which generate a tokenized version of the card when an order is placed. This tokenized credit card can be used for any future booking requests. In order to generate these iFrames, configuration information must be obtained using the `POST /payment/[sessionId]/initiate` endpoint.

> More information about generating tokenex iFrames can be found in the [tokenex docs](https://docs.tokenex.com/docs/iframe-new).

## Initiate Payment

`POST /payment/[sessionId]/initiate`

This endpoint is used to obtain configuration credentials required to generate tokenex iFrames.

### Payload

```json filename="POST /payment/[sessionId]/initiate" copy
{ "origin": "http://localhost:3000", "token": "411111Z6hasQ1111" }
```

This payload may include the following fields:

- `origin`: The URL of the application embedding the iFrames.

> ðŸ›Ž The origin used will have to be whitelisted in production. Please contact our support team for assistance.

- `token` : (optional) The tokenized credit card number. This parameter is included when collecting sensitive information (e.g CVC/CVV) for an already tokenized credit card.

### Response

```json filename="POST /payment/[sessionId]/initiate" copy
{
  "authentication_key": "fBQRtlK5E1SBWJytXMSex7VeSPvAhI8w3A4vgxPD6FC=",
  "expires_at": "2023-06-23T18:46:27.036794Z",
  "client_id": "828643986532625",
  "timestamp": "20230623182627"
}
```

These values are required to create a tokenex [iFrame configuration object](https://docs.tokenex.com/docs/building-the-configuration-object).

- `authentication_key`: This key serves as the `authenticationKey` in the configuration object.
- `client_id`: This id serves as the `tokenExID` in the configuration object.
- `timestamp`: This serves as the `timestamp` in the configuration object.
- `expires_at`: Expiry time of the tokenex iFrame. This is not included in the tokenex configuration object.
